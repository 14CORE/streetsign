{% extends "index.html" %}
{% block title %} Post List {% endblock %}

{% block body %}
<h2>All Posts</h2>
<table class="table table-striped">
<thead>
<tr>
<th>Type</th>
<th>Content</th>
<th>Author</th>
<th>Feeds</th>
<th> 
{% if user.id %}
<div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
    New Post <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
     {% for feed in user.writeable_feeds() %}
        <li><a href="{{ url_for('post_new', feed_id=feed.id) }}">{{feed.name }}</a></li>
      {% endfor %}
  </ul>
  </div>
{% endif %}
</th>
</tr>
</thead>
<tbody>
{% for post in posts|sort(attribute="active_end") %}
    <tr class="time_{{- post.active_status() }}">
    <td>{{ post.type }}</td>
    <td>{{ linkmacros.post(post) }}</td>
    <td>{% if post.author %}
            {{linkmacros.user(post.author)}} (on {{ post.write_date.date() }})
        {% else %}
            No Author!
        {% endif %}
    </td>
    <td>{% if post.feed %}
           {{ linkmacros.feed(post.feed) }}&nbsp;
        {% else %}
            Not Published!
        {% endif %}
    </td>
    <td>{% if post.active %}Active{% endif %}</td>
    </tr>
{% endfor %}
</tbody>
</table>


{% endblock %}
